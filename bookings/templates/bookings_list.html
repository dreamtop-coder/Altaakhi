{% extends 'base.html' %}
{% block content %}
<div class="services-table-fix" style="max-width:900px;margin-right:0;margin-left:auto;background:#f9f9f9;padding:28px 32px;border-radius:10px;box-shadow:0 2px 8px #eee;direction:rtl;overflow-x:auto;">
    <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:12px;">
        <span style="font-size:20px;font-weight:bold;color:#333;text-align:right;">الحجوزات</span>
        <a href="{% url 'booking_create' %}" style="background:#007bff;color:#fff;padding:8px 16px;border-radius:6px;font-weight:bold;text-decoration:none;font-size:0.95em;">إضافة حجز جديد</a>
    </div>

    <table style="width:auto;min-width:100%;border-collapse:collapse;background:#fff;border-radius:8px;overflow:hidden;box-shadow:0 1px 4px #eee;border:1.5px solid #c2c7d0;">
        <thead style="background:#32405a;color:#fff;">
            <tr>
                <th style="padding:10px 6px;min-width:120px;">رقم السيارة</th>
                <th style="padding:10px 6px;min-width:180px;">نوع الخدمة</th>
                <th style="padding:10px 6px;min-width:140px;">تاريخ الخدمة</th>
                <th style="padding:10px 6px;">ملاحظات</th>
                <th style="padding:10px 6px;min-width:140px;">إجراءات</th>
            </tr>
        </thead>
        <tbody>
            {% for booking in bookings %}
            <tr style="border-bottom:1px solid #eee;">
                <td style="padding:8px 6px;text-align:right;">
                    {% if booking.car %}
                        <a href="/cars/?plate_number={{ booking.car.plate_number }}" style="color:#1976d2;text-decoration:underline;font-weight:bold;">{{ booking.car.plate_number }}</a>
                    {% elif booking.plate_number %}
                        {{ booking.plate_number }}
                    {% else %}-{% endif %}
                </td>
                <td style="padding:8px 6px;text-align:right;">{{ booking.service_type }}</td>
                <td style="padding:8px 6px;text-align:right;">{{ booking.service_date }}</td>
                <td style="padding:8px 6px;text-align:right;">{{ booking.notes|default:'-' }}</td>
                <td style="padding:8px 6px;text-align:center;">
                    <div style="display:inline-flex;gap:8px;align-items:center;justify-content:center;white-space:nowrap;">
                        <a href="{% url 'booking_edit' booking.id %}" style="background:#e9f0fb;color:#007bff;padding:5px 12px;border-radius:5px;text-decoration:none;font-weight:bold;">تعديل</a>
                        <a href="{% url 'booking_delete' booking.id %}" style="background:#ffeaea;color:#c00;padding:5px 12px;border-radius:5px;text-decoration:none;font-weight:bold;">حذف</a>
                        {% if booking.service_date == today %}
                        <form method="post" action="{% url 'booking_start_maintenance' booking.id %}" style="display:inline;">
                            {% csrf_token %}
                            <button type="submit" style="background:#e6f4ea;color:#2e7d32;padding:6px 12px;border-radius:5px;border:none;font-weight:bold;">بدء الصيانة</button>
                        </form>
                        {% endif %}
                    </div>
                </td>
            </tr>
            {% empty %}
            <tr><td colspan="5" style="text-align:center;padding:18px;color:#888;">لا توجد حجوزات.</td></tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}
