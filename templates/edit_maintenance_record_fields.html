{% extends 'base.html' %}
{% block content %}
<div class="services-table-fix" style="max-width:900px;margin:12px 0 12px auto;background:#f9f9f9;padding:14px 16px;border-radius:10px;box-shadow:0 2px 8px #eee;direction:rtl;">
    <style>
    .services-table-fix { font-size:0.95rem; }
    @media (max-width:900px) { .services-table-fix { padding:12px; } }
    .form-row { margin-bottom:10px; }
    .compact-input { padding:6px;border-radius:6px;border:1px solid #ccc; }
    </style>

    <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:12px;">
        <span style="font-size:18px;font-weight:bold;color:#333;text-align:right;">تعديل سجل الصيانة للسيارة {{ record.car.plate_number }}</span>
        <a href="{% url 'cars:maintenance_list' %}" style="color:#333;text-decoration:none;font-size:0.95em;">عودة</a>
    </div>

    <div style="display:flex;gap:12px;justify-content:space-between;align-items:center;margin-bottom:8px;">
        <div style="text-align:right;">
            <div style="font-weight:700;color:#333;">العميل: {{ record.car.client.first_name }}{% if record.car.client.last_name %} {{ record.car.client.last_name }}{% endif %}</div>
            <div style="color:#666;font-size:0.95em;">هاتف: {{ record.car.client.phone_number }}</div>
        </div>
        <div style="text-align:right;">
            <div style="font-weight:700;color:#333;">المركبة: {% if record.car.brand %}{{ record.car.brand.name }} {% endif %}{% if record.car.model %}{{ record.car.model.name }}{% endif %} {% if record.car.year %}، {{ record.car.year }}{% endif %}</div>
        </div>
    </div>

    <form method="post">
        {% csrf_token %}
        <div style="overflow-x:auto;">
            <table class="services-compact" style="width:100%;border-collapse:collapse;background:#fff;border-radius:8px;overflow:hidden;box-shadow:0 1px 4px #eee;margin-bottom:12px;">
                <thead style="background:#32405a;color:#fff;">
                    <tr>
                        <th style="padding:10px 8px;text-align:right;">نوع الخدمة</th>
                        <th style="padding:10px 8px;text-align:right;">السعر</th>
                        <th style="padding:10px 8px;text-align:right;">تاريخ الصيانة</th>
                        <th style="padding:10px 8px;text-align:right;">تاريخ التسليم</th>
                    </tr>
                </thead>
                <tbody>
                    <tr style="border-bottom:1px solid #eee;">
                        <td style="padding:8px;text-align:right;">{{ form.service }}</td>
                        <td style="padding:8px;text-align:right;">{{ form.price }}</td>
                        <td style="padding:8px;text-align:right;">{{ form.created_at }}</td>
                        <td style="padding:8px;text-align:right;">{{ form.delivery_date }}</td>
                    </tr>
                    {% if form.notes %}
                    <tr>
                        <td colspan="4" style="padding:8px;text-align:right;">{{ form.notes }}</td>
                    </tr>
                    {% endif %}
                </tbody>
            </table>
        </div>

        <div style="display:flex;gap:8px;align-items:center;">
            <button type="submit" style="background:#28a745;color:#fff;padding:8px 16px;border:none;border-radius:6px;font-weight:bold;">حفظ</button>
            <a href="{% url 'cars:maintenance_list' %}" style="color:#666;text-decoration:none;margin-right:6px;">إلغاء</a>
        </div>
    </form>
</div>
{% endblock %}
