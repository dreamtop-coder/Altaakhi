{% extends 'base.html' %}
{% block content %}

<div class="services-table-fix" style="max-width:1000px;margin:12px 0 12px auto;background:#f9f9f9;padding:14px 16px;border-radius:10px;box-shadow:0 2px 8px #eee;direction:rtl;">
    <style>
    /* Compact spacing to reduce vertical length */
    .services-table-fix { font-size:0.95rem; }
    @media (max-width: 1000px) {
        .services-table-fix { padding:12px; }
    }
    @media (max-width: 700px) {
        .services-table-fix { margin:8px; padding:10px; }
        table { width:100% !important; }
        body, html { overflow-x:hidden; }
        /* Hide model column on very small screens if needed */
        table th:nth-child(3), table td:nth-child(3) { display: none !important; }
    }
    /* Reduce default table row padding */
    table.services-compact thead th { padding:8px 8px !important; }
    table.services-compact tbody td { padding:6px 8px !important; }
    </style>

    <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:18px;">
        <span style="font-size:22px;font-weight:bold;color:#333;text-align:right;">شركات الصنع والموديلات</span>
        <a href="/brands/add/" style="background:#007bff;color:#fff;padding:8px 18px;border-radius:6px;font-weight:bold;text-decoration:none;font-size:1em;">إضافة شركة/موديل</a>
    </div>

    <form method="post" action="" style="margin-bottom:8px;">
        {% csrf_token %}
        <div style="display:flex;gap:8px;align-items:center;flex-wrap:wrap;">
            <input type="text" name="brand_name" placeholder="ادخال اسم الشركة" style="flex:1;min-width:140px;padding:6px;border-radius:6px;border:1px solid #ccc;">
            <input type="text" name="model_name" placeholder="ادخال اسم الموديل" style="flex:1;min-width:140px;padding:6px;border-radius:6px;border:1px solid #ccc;">
            <button type="submit" style="background:#28a745;color:#fff;padding:6px 12px;border:none;border-radius:6px;font-weight:bold;">حفظ</button>
        </div>
    </form>
    <table class="services-compact" style="width:100%;border-collapse:collapse;background:#fff;border-radius:8px;overflow:hidden;box-shadow:0 1px 4px #eee;">
        <thead style="background:#32405a;color:#fff;">
            <tr>
                <th style="padding:8px 8px;text-align:right;">الشركة</th>
                <th style="padding:8px 8px;text-align:right;">الموديل</th>
                <th style="padding:8px 8px;text-align:right;">الإجراءات</th>
            </tr>
        </thead>
        <tbody>
            {% for model in models %}
            <tr style="border-bottom:1px solid #eee;">
                <td style="padding:6px 8px;text-align:right;">{{ model.brand.name }}</td>
                <td style="padding:6px 8px;text-align:right;">{{ model.name }}</td>
                <td style="padding:6px 8px;text-align:right;">
                    <a href="{% url 'edit_model' model.id %}" style="background:#ffc107;color:#222;padding:5px 10px;border-radius:5px;text-decoration:none;display:inline-block;margin-left:6px;">تعديل</a>
                    <a href="{% url 'delete_model' model.id %}" style="background:#dc3545;color:#fff;padding:5px 10px;border-radius:5px;text-decoration:none;display:inline-block;" onclick="return confirm('تأكيد الحذف؟');">حذف</a>
                </td>
            </tr>
            {% empty %}
            <tr><td colspan="3" style="text-align:center;padding:18px;color:#888;">لا توجد موديلات مسجلة حالياً.</td></tr>
            {% endfor %}
        </tbody>
    </table>

</div>

{% endblock %}
